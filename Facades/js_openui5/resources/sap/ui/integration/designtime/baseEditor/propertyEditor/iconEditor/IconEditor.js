/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/designtime/baseEditor/propertyEditor/BasePropertyEditor","sap/m/Input","sap/ui/core/ListItem","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool"],function(B,I,L,F,J,a,b,c){"use strict";var d=B.extend("sap.ui.integration.designtime.baseEditor.propertyEditor.iconEditor.IconEditor",{constructor:function(){B.prototype.constructor.apply(this,arguments);this._oIconModel=new J(c.getIconNames().map(function(n){return{name:n,path:"sap-icon://"+n};}));this._oInput=new I({value:"{value}",showSuggestion:true,showValueHelp:true,valueHelpRequest:this._handleValueHelp.bind(this)});this._oInput.setModel(this._oIconModel,"icons");this._oInput.bindAggregation("suggestionItems","icons>/",new L({text:"{icons>path}",additionalText:"{icons>name}"}));this._oInput.attachLiveChange(function(e){this.firePropertyChange(e.getParameter("value"));}.bind(this));this._oInput.attachSuggestionItemSelected(function(e){this.firePropertyChange(e.getParameter("selectedItem").getText());}.bind(this));this.addContent(this._oInput);},renderer:B.getMetadata().getRenderer().render});d.prototype._handleValueHelp=function(e){var v=e.getSource().getValue();if(!this._oDialog){F.load({name:"sap.ui.integration.designtime.baseEditor.propertyEditor.iconEditor.IconSelection",controller:this}).then(function(D){this._oDialog=D;this.addDependent(this._oDialog);this._oDialog.setModel(this._oIconModel);this._filter(v);this._oDialog.open(v);}.bind(this));}else{this._filter(v);this._oDialog.open(v);}};d.prototype.handleSearch=function(e){var v=e.getParameter("value");this._filter(v);};d.prototype._filter=function(v){var f=new a("path",b.Contains,v);var o=this._oDialog.getBinding("items");o.filter([f]);};d.prototype.handleClose=function(e){var s=e.getParameter("selectedItem");if(s){this.firePropertyChange(s.getIcon());}e.getSource().getBinding("items").filter([]);};return d;});
